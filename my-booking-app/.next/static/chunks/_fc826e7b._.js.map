{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/louai/Desktop/Louai/MO/my-booking-app/components/AdminBreadcrumbs.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Breadcrumbs, Link as MUILink, Typography } from '@mui/material'\r\nimport Link from 'next/link'\r\n\r\ntype Crumb = { label: string; href?: string }\r\n\r\nexport default function AdminBreadcrumbs({ items }: { items: Crumb[] }) {\r\n  const last = items[items.length - 1]\r\n  return (\r\n    <Breadcrumbs aria-label=\"breadcrumb\" sx={{ mb: 2 }}>\r\n      {items.slice(0, -1).map((c) =>\r\n        c.href ? (\r\n          <MUILink key={c.label} component={Link} href={c.href} underline=\"hover\" color=\"inherit\">\r\n            {c.label}\r\n          </MUILink>\r\n        ) : (\r\n          <Typography key={c.label} color=\"text.secondary\">{c.label}</Typography>\r\n        )\r\n      )}\r\n      <Typography color=\"text.primary\" fontWeight={600}>{last.label}</Typography>\r\n    </Breadcrumbs>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AACA;AAHA;;;;AAOe,SAAS,iBAAiB,EAAE,KAAK,EAAsB;IACpE,MAAM,OAAO,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE;IACpC,qBACE,6LAAC,mNAAA,CAAA,cAAW;QAAC,cAAW;QAAa,IAAI;YAAE,IAAI;QAAE;;YAC9C,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,IACvB,EAAE,IAAI,iBACJ,6LAAC,8LAAA,CAAA,OAAO;oBAAe,WAAW,+JAAA,CAAA,UAAI;oBAAE,MAAM,EAAE,IAAI;oBAAE,WAAU;oBAAQ,OAAM;8BAC3E,EAAE,KAAK;mBADI,EAAE,KAAK;;;;yCAIrB,6LAAC,gNAAA,CAAA,aAAU;oBAAe,OAAM;8BAAkB,EAAE,KAAK;mBAAxC,EAAE,KAAK;;;;;0BAG5B,6LAAC,gNAAA,CAAA,aAAU;gBAAC,OAAM;gBAAe,YAAY;0BAAM,KAAK,KAAK;;;;;;;;;;;;AAGnE;KAhBwB","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/louai/Desktop/Louai/MO/my-booking-app/app/admin/salons/page.tsx"],"sourcesContent":["'use client'\r\nimport { useEffect, useState } from 'react'\r\nimport { useAuth } from '@/context/AuthContext'\r\nimport { useRouter } from 'next/navigation'\r\nimport { fetchSalons, createSalonApi } from '@/services/api'\r\nimport { Container, Typography, Stack, TextField, Button, Card, CardContent, Snackbar, Alert, Dialog, DialogTitle, DialogContent, DialogActions, IconButton } from '@mui/material'\r\nimport AdminBreadcrumbs from '@/components/AdminBreadcrumbs'\r\nimport DeleteIcon from '@mui/icons-material/Delete'\r\nimport { deleteSalonApi } from '@/services/api'\r\n\r\nexport default function AdminSalonsPage() {\r\n  const { user } = useAuth()\r\n  const router = useRouter()\r\n  const [salons, setSalons] = useState<{_id:string; name:string; logoUrl?:string}[]>([])\r\n  const [name, setName] = useState('')\r\n  const [logoUrl, setLogoUrl] = useState('')\r\n  const [toast, setToast] = useState<{open:boolean; msg:string; sev:'success'|'error'}>({open:false,msg:'',sev:'success'})\r\n  const [confirmId, setConfirmId] = useState<string|null>(null)\r\n\r\n  useEffect(() => {\r\n    if (!user) return router.replace('/login')\r\n    if (user.role !== 'admin') return router.replace('/')\r\n    ;(async () => setSalons(await fetchSalons()))()\r\n  }, [user])\r\n\r\n    const [activeSalonId, setActiveSalonId] = useState<string|null>(null)\r\n\r\n  const createSalon = async () => {\r\n    if (!name.trim()) { setToast({open:true,msg:'Name erforderlich',sev:'error'}); return }\r\n    try {\r\n      const salon = await createSalonApi({ name, logoUrl: logoUrl || undefined })\r\n      setSalons(prev => [...prev, salon])\r\n      setName(''); setLogoUrl('')\r\n      setToast({open:true,msg:'Salon erstellt',sev:'success'})\r\n    } catch { setToast({open:true,msg:'Fehler beim Erstellen',sev:'error'}) }\r\n  }\r\n\r\n  const doDelete = async () => {\r\n    if (!confirmId) return\r\n    try {\r\n      await deleteSalonApi(confirmId)\r\n      setSalons(prev => prev.filter(s => s._id !== confirmId))\r\n\r\n      // Wenn der aktive Salon gelöscht wurde -> auf anderen umschalten\r\n      if (activeSalonId === confirmId) {\r\n        const fallback = salons.find(s => s._id !== confirmId)?._id || null\r\n        if (fallback) {\r\n          localStorage.setItem('activeSalonId', fallback)\r\n          setActiveSalonId(fallback)\r\n        } else {\r\n          localStorage.removeItem('activeSalonId')\r\n          setActiveSalonId(null)\r\n        }\r\n        // optional: Router-Refresh, damit Header sofort greifen\r\n        router.refresh?.()\r\n      }\r\n\r\n      setConfirmId(null)\r\n      setToast({open:true, msg:'Salon gelöscht', sev:'success'})\r\n    } catch (e: any) {\r\n      const msg = e?.response?.data?.message || 'Löschen fehlgeschlagen'\r\n      setToast({open:true, msg, sev:'error'})\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\r\n      <AdminBreadcrumbs items={[{label:'Mein Salon', href:'/admin'}, {label:'Salons'}]} />\r\n      <Typography variant=\"h4\" fontWeight={800} gutterBottom>Salons</Typography>\r\n\r\n      <Stack direction=\"row\" spacing={2} sx={{ mb: 3 }}>\r\n        <TextField label=\"Name\" value={name} onChange={e=>setName(e.target.value)} />\r\n        <TextField label=\"Logo URL (optional)\" value={logoUrl} onChange={e=>setLogoUrl(e.target.value)} sx={{ minWidth: 360 }} />\r\n        <Button variant=\"contained\" onClick={createSalon}>Neuen Salon anlegen</Button>\r\n      </Stack>\r\n\r\n      <Stack spacing={2}>\r\n          {salons.map(s => (\r\n            <Card key={s._id} variant=\"outlined\">\r\n              <CardContent style={{ display:'flex', alignItems:'center', gap:12 }}>\r\n                <Typography fontWeight={700} style={{ flex:1 }}>\r\n                  {s.name}\r\n                </Typography>\r\n                <IconButton color=\"error\" onClick={() => setConfirmId(s._id)}>\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n      </Stack>\r\n\r\n      <Dialog open={!!confirmId} onClose={() => setConfirmId(null)}>\r\n        <DialogTitle>Salon löschen?</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Dies kann nur erfolgen, wenn keine Mitarbeiter, Services, Buchungen oder Abwesenheiten mehr mit dem Salon verknüpft sind.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setConfirmId(null)}>Abbrechen</Button>\r\n          <Button color=\"error\" variant=\"contained\" onClick={doDelete}>Löschen</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Snackbar open={toast.open} autoHideDuration={2200} onClose={()=>setToast(p=>({...p, open:false}))}>\r\n        <Alert severity={toast.sev} variant=\"filled\">{toast.msg}</Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}